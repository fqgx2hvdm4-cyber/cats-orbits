<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Кіт + Орбіти + Зображення</title>
  <style>
    body {
      margin: 0;
      background-color: #111;
      font-family: sans-serif;
      color: #fff;
      overflow: hidden;
      text-align: center;
    }

    canvas#c {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }

    .main {
      position: relative;
      z-index: 2;
      margin-top: 50px;
    }

    /* Галерея зображень */
    .gallery {
      display: flex;
      justify-content: center;
      margin-top: 500px; /* щоб не перекривало canvas */
      gap: 20px;
    }

    .gallery img {
      width: 120px;
      height: auto;
      border-radius: 12px;
      border: 2px solid #fd6e72;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .gallery img:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px #fd6e72;
    }

    h2 {
      margin-top: 20px;
    }

    /* Контрольна панель для canvas */
    #control-panel {
      position: fixed;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.6);
      padding: 10px 15px;
      border-radius: 8px;
      color: white;
      font-family: sans-serif;
      z-index: 10;
      user-select: none;
    }
    #control-panel p {
      margin: 0 0 8px 0;
      font-size: 14px;
    }
    #control-panel label {
      margin-right: 10px;
    }
    #control-panel button {
      margin-left: 10px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<!-- Контрольна панель -->
<div id="control-panel">
  <p>Click and drag to make more!</p>
  <label>Trails: </label>
  <input type="checkbox" id="trail" name="trail" checked />
  <button id="clear">Clear</button>
  <a href="https://codepen.io/jackrugile/pen/aCzHs" target="_blank" style="color:#ccc;">View Version 2</a>
</div>

<!-- Canvas для орбіт -->
<canvas id="c"></canvas>

<!-- Галерея зображень -->
<h2>Моє зображення у трьох форматах</h2>
<div class="gallery">
  <img src="images/cat.png" alt="Кіт PNG">
  <img src="images/cat.jpg" alt="Кіт JPG">
  <img src="images/cat.webp" alt="Кіт WEBP">
</div>

<script>
// --- Код орбіт (як у вашому прикладі) ---
window.requestAnimFrame = (function(){
  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback){ window.setTimeout(callback, 1000/60); };
})();

var c = document.getElementById('c');
var ctx = c.getContext('2d');
var dpr = window.devicePixelRatio || 1;
var cw = window.innerWidth;
var ch = window.innerHeight;
c.width = cw*dpr;
c.height = ch*dpr;
ctx.scale(dpr,dpr);
ctx.lineCap = 'round';

var orbs = [];
var trailCB = document.getElementById('trail');
var trail = trailCB.checked;
var clearer = document.getElementById('clear');

function rand(rMi,rMa){ return Math.floor(Math.random()*(rMa-rMi+1))+rMi; }

function createOrb(mx,my){
  var dx=(cw/2)-mx, dy=(ch/2)-my;
  var dist=Math.sqrt(dx*dx+dy*dy);
  var angle=Math.atan2(dy,dx);
  orbs.push({
    x:mx, y:my, lastX:mx, lastY:my, hue:0, colorAngle:0, angle:angle+Math.PI/2,
    size:rand(1,3)/2, centerX:cw/2, centerY:ch/2, radius:dist, speed:(rand(5,10)/1000)*(dist/750)+.015,
    alpha:1-Math.abs(dist)/cw,
    draw:function(){ ctx.strokeStyle='hsla('+this.colorAngle+',100%,50%,1)'; ctx.lineWidth=this.size; ctx.beginPath(); ctx.moveTo(this.lastX,this.lastY); ctx.lineTo(this.x,this.y); ctx.stroke(); },
    update:function(){
      this.lastX=this.x; this.lastY=this.y;
      this.x=this.centerX + Math.sin(this.angle*-1)*this.radius;
      this.y=this.centerY + Math.cos(this.angle*-1)*this.radius;
      this.angle += this.speed;
      var mx = this.x, my = this.y;
      var dx=cw/2-mx, dy=ch/2-my;
      var slope = -(dy/(dx||0.0001));
      var rad=Math.atan(slope);
      var angleH=Math.floor(rad*(180/Math.PI));
      if(dx<0 && dy<0){angleH+=180;}
      if(dx<0 && dy>0){angleH+=180;}
      if(dx>0 && dy>0){angleH+=360;}
      if(isNaN(angleH)){angleH=0;}
      this.colorAngle=angleH;
    }
  });
}

function orbGo(e){ createOrb(e.pageX - c.offsetLeft, e.pageY - c.offsetTop); }
function turnOnMove(){ c.addEventListener('mousemove', orbGo, false); }
function turnOffMove(){ c.removeEventListener('mousemove', orbGo, false); }
function toggleTrails(){ trail = trailCB.checked; }
function clear(){ orbs = []; }

c.addEventListener('mousedown', orbGo, false);
c.addEventListener('mousedown', turnOnMove, false);
c.addEventListener('mouseup', turnOffMove, false);
trailCB.addEventListener('change', toggleTrails, false);
clearer.addEventListener('click', clear, false);

var count = 100; while(count--){ createOrb(cw/2, ch/2 + (count*2)); }

function loop(){
  requestAnimFrame(loop);
  if(trail){ ctx.fillStyle='rgba(0,0,0,0.1)'; ctx.fillRect(0,0,cw,ch); }
  else{ ctx.clearRect(0,0,cw,ch); }
  orbs.forEach(orb => { for(let i=0;i<3;i++){ orb.update(); orb.draw(); } });
}
loop();
</script>

</body>
</html>
